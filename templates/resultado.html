{% extends "base.html" %}

{% block title %} Galería {% endblock %}

{% block body %}
<!--Para generar el código QR, se utiliza la librería qrcodejs-->

{% block scripts %}
<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/resultado.css') }}">
{% endblock %}

<h3>Imagen Procesada</h3>
<section id="main-content">
    <section id="image-section">
        <!-- El template recibe como dato una tupla image = (id, relative_path), relative_path = static/uploads/{id}.png -->
    <div class="oneline">
        <a target="_blank" href="../{{ image.1 }}">
            <img src="../{{ image.1 }}" alt="{{ image.0 }}.png" width="200">
        </a>
    </div>
    <div class="oneline" style="margin-top: 10px">
        <a href="../{{ image.1 }}" class="btn" target="_blank" download>
            Descargar Imagen
        </a>
    </div>
</section>
<section id="qr-code-section">
    <div class="oneline">
        <p>
            Código QR de Imagen:
        </p>
    </div>
    <div class="oneline" id="qrcode">
    </div>
    <div class="oneline">
        <a href="{{ request.url_root }}resultado/{{ image.0 }}" id="url">
            {{ request.url_root }}resultado/{{ image.0 }}
        </a>
    </div>
</section>
</section>
<script>
    var qrcode = new QRCode(document.getElementById("qrcode"), {
        text: "{{ request.url_root }}resultado/{{ image.0 }}",
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
    });
</script>
{% endblock %}